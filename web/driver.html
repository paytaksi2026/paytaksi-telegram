<!doctype html>
<html lang="az">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PayTaksi S√ºr√ºc√º Paneli</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0}
    #map{height:60vh}
    .bar{padding:12px;background:#0f172a;color:#e5e7eb}
    .wrap{padding:12px}
    input{width:100%;padding:10px;border-radius:10px;border:1px solid #cbd5e1}
    button{padding:10px 12px;border-radius:10px;border:0;background:#22c55e;color:#052e14;font-weight:700;width:100%}
    .muted{color:#64748b}
  </style>
</head>
<body>
  <div class="bar"><b>üöñ S√ºr√ºc√º Paneli</b> <span class="muted">‚Äî Mini App</span></div>
  <div id="map"></div>
  <div class="wrap">
    <div class="muted">API BASE URL</div>
    <input id="api" placeholder="https://paytaksi-telegram-wlig.onrender.com" />
    <div style="height:10px"></div>
    <button onclick="init()">Qo≈üul</button>
    <div style="height:10px"></div>
    <div id="info" class="muted">-</div>
  </div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
let map, marker;
function getBase(){
  const saved = localStorage.getItem('PAYTAKSI_API_BASE') || '';
  const el = document.getElementById('api');
  const def = (window.location && window.location.origin) ? window.location.origin : '';

  // Auto-fill with the current origin so the user doesn't have to type URL in Telegram Mini App.
  if(!el.value) el.value = saved || def;

  const base = (el.value || saved || def || '').replace(/\/$/,'');
  if(base) localStorage.setItem('PAYTAKSI_API_BASE', base);
  return base;
}
function init(){
  const base = getBase();
  localStorage.setItem('PAYTAKSI_API_BASE', base);
  if(!base){ document.getElementById('info').textContent='API URL yazƒ±n.'; return; }

  if(!map){
    map = L.map('map').setView([40.4093, 49.8671], 11);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);
    marker = L.marker([40.4093, 49.8671]).addTo(map).bindPopup('S√ºr√ºc√º');
  }

  document.getElementById('info').textContent = 'Qo≈üuldu ‚úÖ (bu s…ôhif…ô demo paneldir)';
}
init();
</script>
</body>
</html>
